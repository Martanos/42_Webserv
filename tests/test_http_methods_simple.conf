# Test configuration for HTTP methods (PDF compliant)
# Testing accepted HTTP methods for routes (GET, POST, DELETE required)

# Server with basic HTTP method restrictions
server {
    listen 8080;
    server_name methods.com;
    root /var/www/html;
    
    # Allow only GET and POST methods
    location / {
        allowed_methods GET POST;
    }
}

# Server with different methods per location
server {
    listen 8081;
    server_name api.com;
    root /var/www/api;
    
    # Read-only API endpoint (GET only)
    location /api/read/ {
        allowed_methods GET;
    }
    
    # Write API endpoint (POST only)
    location /api/write/ {
        allowed_methods POST;
    }
    
    # Full CRUD API endpoint (GET, POST, DELETE)
    location /api/crud/ {
        allowed_methods GET POST DELETE;
    }
    
    # Admin endpoint with all methods
    location /api/admin/ {
        allowed_methods GET POST DELETE;
    }
}

# Server for file operations
server {
    listen 8082;
    server_name files.com;
    root /var/www/files;
    
    # File download (GET only)
    location /download/ {
        allowed_methods GET;
    }
    
    # File upload (POST only)
    location /upload/ {
        allowed_methods POST;
        client_max_body_size 100M;
    }
    
    # File management (GET, POST, DELETE)
    location /manage/ {
        allowed_methods GET POST DELETE;
    }
}

# Server with method restrictions per resource type
server {
    listen 8083;
    server_name rest.com;
    root /var/www/rest;
    
    # Users collection (GET to list, POST to create)
    location /users {
        allowed_methods GET POST;
    }
    
    # Individual user resource (GET to view, DELETE to remove)
    location /users/ {
        allowed_methods GET DELETE;
    }
    
    # Posts collection
    location /posts {
        allowed_methods GET POST;
    }
    
    # Individual post resource
    location /posts/ {
        allowed_methods GET POST DELETE;
    }
}

# Server testing default behavior (no method restrictions)
server {
    listen 8084;
    server_name default.com;
    root /var/www/default;
    
    # No method restrictions - should allow all
    location / {
        # No allowed_methods specified
    }
    
    # Specific restriction on one location
    location /restricted/ {
        allowed_methods GET;
    }
}
